<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
    <p id="result"></p>
    <button onclick="callAPIResponse()">API호출</button>
    <button onclick="init()">초기화</button>
    <script>
        let result = document.getElementById("result");
        async function fetchData(){
          try {
            const response = await fetch("https://api-test-gdsc-22b48e20369e.herokuapp.com/api/data");

            if(!response.ok) {
              throw new Error(`오류발생!, 오류코드: ${response.status}`);
            }

            const data = await response.text();

            displayData(data);
          } catch(error){
            console.log("데이터 오류"+error);
            result.innerHTML = `데이터를 가져오는데 실패했습니다: ${error.message}`;
          }
        }

        function displayData(data) {
          result.innerHTML = `${data}`;
        }

        function callAPIResponse() {
            fetchData();
        }

        function init(){
          result.innerHTML = "";
        }
        
    </script>
</body>
</html>